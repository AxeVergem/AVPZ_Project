@model Cash_Inspection.Models.Category
@using Cash_Inspection.Models;

@{
    ViewBag.Title = "Details";
    IdentityUnitOfWork _Manager = new IdentityUnitOfWork();
}



<div class="container" style="min-height:490px;">
    <div class="row">
        @*журнал*@
        <h2>@ViewBag.CategoryName</h2>
        <h4>Cредства:@Model.NumberofMoney</h4>
    
                <div class="col-md-6" style="overflow-y:scroll;max-height:22em">
                    <table class="table table-hover">
                        <thead>
                            <tr>
                                <th>Имя</th>
                                <th>Средства</th>
                                <th>Комментарий</th>
                                <th>дата</th>
                            </tr>
                        </thead>


                        @foreach (Subcategory item in _Manager.Categories.GetAllSubcategory(Model))
                        {
                            <tbody>
                                <tr>
                                    <td>@item.Title</td>
                                    <td>@item.Value</td>
                                    <th>@item.Text</th>
                                    <td>@item.Date</td>
                                </tr>
                            </tbody>
                        }
                    </table>
                </div>           
            @*статистика*@
            <div class="col-md-6">
                <div class="row" id="chart_div">

                </div>
                            <script type="text/javascript" src="https://www.google.com/jsapi"></script>
                                         <script type="text/javascript">
                                                                  // Подгружаем API
                                                                  google.load('visualization', '1.0', { 'packages': ['corechart'] });
                                                                  // Устанавливаем callback
                                                                  google.setOnLoadCallback(drawChart);

                                                                  function drawChart() {

                                                                      var options = {
                                                                          'title': 'Статистика:',
                                                                          'width': 550,
                                                                          'height': 350
                                                                      };

                                                                      var data = new google.visualization.DataTable();
                                                                      data.addColumn('string', 'Категория');
                                                                      data.addColumn('number', 'сумма');

                                                                      $.getJSON('@Url.Action("ColumnDiogram", "Subcategories", new  {  id = Model.Id })', null,
                                                                                                                    function (result) {
                                                                          if (result.Countries.length) {
                                                                              $.each(result.Countries, function (index, c)
                                                                              {
                                                                                  data.addRow([c.Title, c.Value]);
                                                                              });
                                                                              // Отрисовка диаграммы
                                                                              var chart = new google.visualization.ColumnChart(
                                                                                                    document.getElementById('chart_div'));
                                                                              chart.draw(data, options);
                                                                          };
                                                                      });
                                                                  }
                                            </script>




                <div class="row">
                    <a class="ibtn waves-effect waves-light ibtn" style="width:49%" href="@Url.Action("CreateImp", "Subcategories", new { id = ViewBag.ID })"><i class="material-icons">remove</i></a>
                    <a class="ibtn waves-effect waves-light ibtn" style="width:49%" href="@Url.Action("CreateUmp", "Subcategories", new { id = ViewBag.ID })"><i class="material-icons">add</i></a>
                </div>
            </div>

        </div>
</div>

@*<div>
        <h4>Category</h4>
        <hr />
        <dl class="dl-horizontal">
            <dt>
                @Html.DisplayNameFor(model => model.Title)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.Title)
            </dd>

            <dt>
                @Html.DisplayNameFor(model => model.NumberofMoney)
            </dt>

            <dd>
                @Html.DisplayFor(model => model.NumberofMoney)
            </dd>

        </dl>
    </div>*@